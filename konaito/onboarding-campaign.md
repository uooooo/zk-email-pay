## オンボーディング配布（受取目的でない相手に送ってアカウント作成を促す）

結論: 可能です。目的に応じて次の2パターンを使い分けます。

### パターンA: 招待メールだけ送る（資産は送らない）
相手に資産を送らず、まずアカウント作成を促したい場合の最小パスです。

- 仕組み: Relayer の `createAccount` API で招待メールを送信。相手がメールに返信すると `account_creation`/`account_init` 回路が走り、ウォレットが作成されます。
- API 例（POST `/api/createAccount`）
```json
{ "email_addr": "newuser@example.com" }
```
- 備考: 受取人側に資産/ガスは不要。送信側はメール配信のみ（手数料なし）。

### パターンB: 少額資産を同封して招待（未請求→クレーム）
アカウント作成の誘因として少額のトークンを先に送る方法です。

- 仕組み: オペレータのメールウォレットから、相手のメールアドレス宛に通常の「Send … to …」メールを送信。相手が未作成ならチェーン上に Unclaims（未請求）が作られ、Relayer が招待メールを送付します。相手は後から `claim.circom` で請求して受け取れます。
- 準備: 送信側（オペレータ）が Email Wallet を作成し、資産と手数料上限に見合う残高を用意。
- メール件名の例: `Send 5 USDC to newuser@example.com`
- 失効/回収: 期限切れの未請求は `void` で回収可能（運用の void ルーチンを用意）。

### どちらを選ぶか
- 迅速に「数を打つ」: パターンA（招待のみ）
- 行動を強く促す/実利を示す: パターンB（少額同封）

### 注意事項
- 同意/スパム対策: 商用メール基準に従いオプトイン/オプトアウトを用意。
- 期限: 未請求には有効期限があります。キャンペーン設計で期限と回収手順（void）を明記。
- PII: メールはコミット/マスクでオンチェーン秘匿。DB/ログでもマスキング方針に従う。

### 実装メモ
- API は `vendor/email-wallet/packages/relayer/src/modules/web_server/rest_api.rs` を参照。
- `/api/send` は「送信者のウォレットが既に存在」前提のリクエストメール生成用です。バッチ配布は、送信者側を運営のメールウォレットにし、SMTP 経由で件名コマンドを送る運用がシンプルです。
- 初回体験向上: Relayer の環境変数 `ONBOARDING_TOKEN_*` を活用して初回配布を組み込む運用も検討（要実装確認）。

---
更新: 2025-09-04
